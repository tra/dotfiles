{"mode":"editor","version":1,"windowDimensions":{"x":553,"y":22,"width":1515,"height":1412},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/tra/github/timerage","buffers":[{"text":"require_relative \"../spec_helper\"\n\ndescribe Timerage::TimeInterval do\n  let(:now) { Time.now }\n  let(:duration) { 3600 }\n\n  describe \"creation\" do\n    specify { expect(described_class.new(now-1..now)).to be_kind_of described_class }\n    specify { expect(described_class.new(now-1, now)).to be_kind_of described_class }\n    specify { expect(described_class.new(now-1, now, true)).to be_kind_of described_class }\n    specify { expect(described_class.new(now-1, now, false )).to be_kind_of described_class }\n  end\n\n  subject(:interval) { described_class.new(now-duration, now) }\n\n  it { is_expected.to behave_like_a Range }\n  specify { expect(interval.begin).to eq now - duration }\n  specify { expect(interval.end).to eq now }\n  specify { expect(interval.to_time).to behave_like_a Time }\n  specify { expect(interval.to_time).to (be >= interval.begin)\n      .and (be <= interval.end) }\n  specify { expect{|b| interval.step(1200, &b) }\n      .to yield_control.at_least(:once) }\n\n  context \"interval include end\" do\n    specify { expect(interval.exclude_end?).to be false }\n    specify { expect(interval.cover? now).to be true }\n    specify { expect(interval.cover? now - duration).to be true }\n    specify { expect(interval.cover? now - (duration/2)).to be true }\n    specify { expect(interval.cover? now + 1).to be false }\n    specify { expect(interval.cover? now - (duration + 1)).to be false }\n\n    specify { expect{|b| interval.step(1200, &b) }\n        .to yield_successive_args now-duration, now-(duration-1200), now-(duration-2400), now }\n\n    context \"duration of non-integer steps\" do\n      specify { expect{|b| interval.step(1000, &b) }\n          .to yield_successive_args now-duration, now-(duration-1000), now-(duration-2000), now-(duration-3000) }\n    end\n  end\n\n  context \"interval exclude end\" do\n    subject(:interval) { described_class.new(now-duration...now) }\n\n    specify { expect(interval.exclude_end?).to be true }\n    specify { expect(interval.cover? now).to be false }\n    specify { expect(interval.cover? now - duration).to be true }\n    specify { expect(interval.cover? now - (duration/2)).to be true }\n    specify { expect(interval.cover? now + 1).to be false }\n    specify { expect(interval.cover? now - (duration + 1)).to be false }\n\n    specify { expect{|b| interval.step(1200, &b) }\n        .to yield_successive_args now-duration, now-(duration-1200), now-(duration-2400) }\n\n  end\n\n  matcher :behave_like_a do |expected|\n    match do |actual|\n      Set[*expected.instance_methods].subset? Set[*actual.methods]\n    end\n  end\nend\n","markers":{"markers":{"1":{"id":1,"range":[[53,0],[53,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":19,"goalBufferRange":null},"deserializer":"Marker"},"2":{"id":2,"range":[[25,0],[25,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"3":{"id":3,"range":[[25,0],[25,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[{"patches":[{"oldRange":[[48,0],[51,0]],"newRange":[[48,0],[48,0]],"oldText":"\n  let(:now) { Time.now }\n  let(:duration) { 3600 }\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"},{"oldRange":[[2,34],[2,34]],"newRange":[[2,34],[3,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[3,0],[3,0]],"newRange":[[3,0],[3,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,2],[3,2]],"newRange":[[3,2],[4,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[4,0],[4,0]],"newRange":[[4,0],[4,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[4,2],[4,2]],"newRange":[[4,2],[7,0]],"oldText":"","newText":"\n    let(:now) { Time.now }\n    let(:duration) { 3600 }\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[3,0],[3,0]]},"newParams":{"range":[[3,0],[3,2]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,0],[3,2]],"newRange":[[3,0],[3,0]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[3,0],[3,0]]},"newParams":{"range":[[3,0],[4,0]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,0],[4,0]],"newRange":[[3,0],[3,0]],"oldText":"\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[3,0],[3,0]]},"newParams":{"range":[[3,0],[3,2]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,0],[3,2]],"newRange":[[3,0],[3,0]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[6,0],[6,0]]},"newParams":{"range":[[6,0],[7,0]]},"deserializer":"MarkerPatch"},{"oldRange":[[6,0],[7,0]],"newRange":[[6,0],[6,0]],"oldText":"\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[6,0],[6,0]],"newRange":[[6,0],[7,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[7,0],[7,0]],"newRange":[[7,0],[7,0]],"oldText":"","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[3,0],[3,0]]},"newParams":{"range":[[3,0],[4,0]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,0],[4,0]],"newRange":[[3,0],[3,0]],"oldText":"\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"range":[[3,0],[3,0]]},"newParams":{"range":[[3,4],[3,4]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,4],[3,4]],"newRange":[[3,4],[3,6]],"oldText":"","newText":"  ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"reversed":false,"range":[[3,6],[3,6]]},"newParams":{"reversed":true,"range":[[3,4],[3,6]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,4],[3,6]],"newRange":[[3,4],[3,4]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[3,4],[3,4]]},"newParams":{"range":[[3,2],[3,4]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,2],[3,4]],"newRange":[[3,2],[3,2]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"reversed":true,"range":[[4,2],[4,2]]},"newParams":{"reversed":false,"range":[[4,2],[4,4]]},"deserializer":"MarkerPatch"},{"oldRange":[[4,2],[4,4]],"newRange":[[4,2],[4,2]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[4,0],[4,0]],"newRange":[[4,0],[4,1]],"oldText":"","newText":"","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[4,1],[4,1]]},"newParams":{"range":[[4,1],[4,2]]},"deserializer":"MarkerPatch"},{"oldRange":[[4,1],[4,2]],"newRange":[[4,1],[4,1]],"oldText":" ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"range":[[24,0],[24,0]]},"newParams":{"range":[[24,2],[24,2]]},"deserializer":"MarkerPatch"},{"oldRange":[[24,2],[24,2]],"newRange":[[24,2],[24,4]],"oldText":"","newText":"  ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"reversed":false,"range":[[24,4],[24,4]]},"newParams":{"reversed":true,"range":[[24,2],[24,4]]},"deserializer":"MarkerPatch"},{"oldRange":[[24,2],[24,4]],"newRange":[[24,2],[24,2]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[24,35],[24,35]],"newRange":[[24,35],[25,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[25,0],[25,0]],"newRange":[[25,0],[25,4]],"oldText":"","newText":"    ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,4],[25,4]],"newRange":[[25,4],[25,5]],"oldText":"","newText":"c","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,5],[25,5]],"newRange":[[25,5],[25,6]],"oldText":"","newText":"o","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,6],[25,6]],"newRange":[[25,6],[25,7]],"oldText":"","newText":"n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,7],[25,7]],"newRange":[[25,7],[25,8]],"oldText":"","newText":"t","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,8],[25,8]],"newRange":[[25,8],[25,9]],"oldText":"","newText":"e","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,9],[25,9]],"newRange":[[25,9],[25,10]],"oldText":"","newText":"x","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,10],[25,10]],"newRange":[[25,10],[25,11]],"oldText":"","newText":"t","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,11],[25,11]],"newRange":[[25,11],[25,12]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,12],[25,12]],"newRange":[[25,12],[25,14]],"oldText":"","newText":"\"\"","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,13],[25,13]],"newRange":[[25,13],[25,14]],"oldText":"","newText":"d","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"reversed":true,"range":[[25,0],[25,0]]},"newParams":{"reversed":false,"range":[[25,0],[25,15]]},"deserializer":"MarkerPatch"},{"oldRange":[[25,0],[25,15]],"newRange":[[25,0],[25,0]],"oldText":"    context \"d\"","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[25,0],[25,0]]},"newParams":{"range":[[25,0],[26,0]]},"deserializer":"MarkerPatch"},{"oldRange":[[25,0],[26,0]],"newRange":[[25,0],[25,0]],"oldText":"\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[24,35],[24,35]],"newRange":[[24,35],[25,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[25,0],[25,0]],"newRange":[[25,0],[25,4]],"oldText":"","newText":"    ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,4],[25,4]],"newRange":[[25,4],[25,5]],"oldText":"","newText":"c","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,5],[25,5]],"newRange":[[25,5],[25,6]],"oldText":"","newText":"o","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,6],[25,6]],"newRange":[[25,6],[25,7]],"oldText":"","newText":"n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,7],[25,7]],"newRange":[[25,7],[25,8]],"oldText":"","newText":"t","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,8],[25,8]],"newRange":[[25,8],[25,9]],"oldText":"","newText":"e","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,9],[25,9]],"newRange":[[25,9],[25,10]],"oldText":"","newText":"x","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,10],[25,10]],"newRange":[[25,10],[25,11]],"oldText":"","newText":"t","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,11],[25,11]],"newRange":[[25,11],[25,12]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,12],[25,12]],"newRange":[[25,12],[25,14]],"oldText":"","newText":"\"\"","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,13],[25,13]],"newRange":[[25,13],[25,14]],"oldText":"","newText":"d","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,14],[25,14]],"newRange":[[25,14],[25,15]],"oldText":"","newText":"u","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,15],[25,15]],"newRange":[[25,15],[25,16]],"oldText":"","newText":"r","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,16],[25,16]],"newRange":[[25,16],[25,17]],"oldText":"","newText":"a","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,17],[25,17]],"newRange":[[25,17],[25,18]],"oldText":"","newText":"t","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,18],[25,18]],"newRange":[[25,18],[25,19]],"oldText":"","newText":"i","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,19],[25,19]],"newRange":[[25,19],[25,20]],"oldText":"","newText":"o","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,20],[25,20]],"newRange":[[25,20],[25,21]],"oldText":"","newText":"n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,21],[25,21]],"newRange":[[25,21],[25,22]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,22],[25,22]],"newRange":[[25,22],[25,23]],"oldText":"","newText":"o","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,23],[25,23]],"newRange":[[25,23],[25,24]],"oldText":"","newText":"f","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,24],[25,24]],"newRange":[[25,24],[25,25]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,25],[25,25]],"newRange":[[25,25],[25,26]],"oldText":"","newText":"n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,26],[25,26]],"newRange":[[25,26],[25,27]],"oldText":"","newText":"o","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,27],[25,27]],"newRange":[[25,27],[25,28]],"oldText":"","newText":"n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,28],[25,28]],"newRange":[[25,28],[25,29]],"oldText":"","newText":"-","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,29],[25,29]],"newRange":[[25,29],[25,30]],"oldText":"","newText":"i","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,30],[25,30]],"newRange":[[25,30],[25,31]],"oldText":"","newText":"n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,31],[25,31]],"newRange":[[25,31],[25,32]],"oldText":"","newText":"t","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,32],[25,32]],"newRange":[[25,32],[25,33]],"oldText":"","newText":"e","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,33],[25,33]],"newRange":[[25,33],[25,34]],"oldText":"","newText":"r","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"reversed":false,"range":[[25,34],[25,34]]},"newParams":{"reversed":true,"range":[[25,33],[25,34]]},"deserializer":"MarkerPatch"},{"oldRange":[[25,33],[25,34]],"newRange":[[25,33],[25,33]],"oldText":"r","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,33],[25,33]],"newRange":[[25,33],[25,34]],"oldText":"","newText":"g","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,34],[25,34]],"newRange":[[25,34],[25,35]],"oldText":"","newText":"e","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,35],[25,35]],"newRange":[[25,35],[25,36]],"oldText":"","newText":"r","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,36],[25,36]],"newRange":[[25,36],[25,37]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,37],[25,37]],"newRange":[[25,37],[25,38]],"oldText":"","newText":"v","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,38],[25,38]],"newRange":[[25,38],[25,39]],"oldText":"","newText":"a","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,39],[25,39]],"newRange":[[25,39],[25,40]],"oldText":"","newText":"l","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,40],[25,40]],"newRange":[[25,40],[25,41]],"oldText":"","newText":"u","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,41],[25,41]],"newRange":[[25,41],[25,42]],"oldText":"","newText":"e","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[25,0],[26,0]],"newRange":[[25,0],[25,0]],"oldText":"    context \"duration of non-integer value\"\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[33,95],[33,95]],"newRange":[[33,95],[34,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[34,0],[34,0]],"newRange":[[34,0],[34,8]],"oldText":"","newText":"        ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[34,8],[34,8]],"newRange":[[34,8],[35,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[35,0],[35,0]],"newRange":[[35,0],[35,8]],"oldText":"","newText":"        ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[35,8],[35,8]],"newRange":[[35,8],[36,0]],"oldText":"","newText":"context \"duration of non-integer value\"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[35,0],[35,0]]},"newParams":{"range":[[35,0],[35,2]]},"deserializer":"MarkerPatch"},{"oldRange":[[35,0],[35,2]],"newRange":[[35,0],[35,0]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[35,0],[35,0]]},"newParams":{"range":[[35,0],[35,2]]},"deserializer":"MarkerPatch"},{"oldRange":[[35,0],[35,2]],"newRange":[[35,0],[35,0]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[35,0],[35,0]]},"newParams":{"range":[[35,0],[35,2]]},"deserializer":"MarkerPatch"},{"oldRange":[[35,0],[35,2]],"newRange":[[35,0],[35,0]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[35,0],[35,0]]},"newParams":{"range":[[35,0],[35,2]]},"deserializer":"MarkerPatch"},{"oldRange":[[35,0],[35,2]],"newRange":[[35,0],[35,0]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[35,0],[35,0]],"newRange":[[35,0],[35,8]],"oldText":"","newText":"        ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[35,2],[35,2]]},"newParams":{"range":[[35,2],[35,4]]},"deserializer":"MarkerPatch"},{"oldRange":[[35,2],[35,4]],"newRange":[[35,2],[35,2]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[35,4],[35,4]]},"newParams":{"range":[[35,4],[35,6]]},"deserializer":"MarkerPatch"},{"oldRange":[[35,4],[35,6]],"newRange":[[35,4],[35,4]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[35,43],[35,43]],"newRange":[[35,43],[35,44]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[35,44],[35,44]],"newRange":[[35,44],[35,45]],"oldText":"","newText":"d","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[35,45],[35,45]],"newRange":[[35,45],[35,46]],"oldText":"","newText":"o","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[37,0],[37,0]],"newRange":[[37,0],[37,2]],"oldText":"","newText":"  ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[37,2],[37,2]],"newRange":[[37,2],[37,3]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[37,3],[37,3]],"newRange":[[37,3],[37,4]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[37,4],[37,4]],"newRange":[[37,4],[37,5]],"oldText":"","newText":"e","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[37,5],[37,5]],"newRange":[[37,5],[37,6]],"oldText":"","newText":"n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[37,6],[37,6]],"newRange":[[37,6],[37,7]],"oldText":"","newText":"d","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[36,0],[36,0]],"newRange":[[36,0],[36,6]],"oldText":"","newText":"      ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[36,6],[36,6]],"newRange":[[36,6],[38,0]],"oldText":"","newText":"specify { expect{|b| interval.step(1200, &b) }\n          .to yield_successive_args now-duration, now-(duration-1200), now-(duration-2400), now }\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[38,0],[38,0]]},"newParams":{"range":[[38,0],[39,0]]},"deserializer":"MarkerPatch"},{"oldRange":[[38,0],[39,0]],"newRange":[[38,0],[38,0]],"oldText":"\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"reversed":false,"range":[[36,43],[36,43]]},"newParams":{"reversed":true,"range":[[36,42],[36,43]]},"deserializer":"MarkerPatch"},{"oldRange":[[36,42],[36,43]],"newRange":[[36,42],[36,42]],"oldText":"2","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[36,42],[36,42]],"newRange":[[36,42],[36,43]],"oldText":"","newText":"0","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"reversed":true,"range":[[37,65],[37,65]]},"newParams":{"reversed":false,"range":[[37,65],[37,66]]},"deserializer":"MarkerPatch"},{"oldRange":[[37,65],[37,66]],"newRange":[[37,65],[37,65]],"oldText":"2","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[37,65],[37,65]],"newRange":[[37,65],[37,66]],"oldText":"","newText":"0","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[37,86],[37,86]]},"newParams":{"range":[[37,86],[37,87]]},"deserializer":"MarkerPatch"},{"oldRange":[[37,86],[37,87]],"newRange":[[37,86],[37,86]],"oldText":"4","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[37,86],[37,86]],"newRange":[[37,86],[37,87]],"oldText":"","newText":"0","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":true,"range":[[35,37],[35,42]]},"newParams":{"tailed":false,"range":[[35,42],[35,42]]},"deserializer":"MarkerPatch"},{"oldRange":[[35,37],[35,42]],"newRange":[[35,37],[35,38]],"oldText":"value","newText":"s","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[35,38],[35,38]],"newRange":[[35,38],[35,39]],"oldText":"","newText":"t","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[35,39],[35,39]],"newRange":[[35,39],[35,40]],"oldText":"","newText":"e","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[35,40],[35,40]],"newRange":[[35,40],[35,41]],"oldText":"","newText":"p","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[35,41],[35,41]],"newRange":[[35,41],[35,42]],"oldText":"","newText":"s","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[37,90],[37,95]],"newRange":[[37,90],[37,90]],"oldText":", now","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[37,69],[37,69]]},"newParams":{"range":[[37,69],[37,92]]},"deserializer":"MarkerPatch"},{"oldRange":[[37,69],[37,92]],"newRange":[[37,69],[37,69]],"oldText":", now-(duration-2000) }","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[37,69],[37,69]],"newRange":[[37,69],[37,92]],"oldText":"","newText":", now-(duration-2000) }","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[37,90],[37,90]],"newRange":[[37,90],[37,113]],"oldText":"","newText":", now-(duration-2000) }","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"reversed":false,"range":[[37,113],[37,113]]},"newParams":{"reversed":true,"range":[[37,112],[37,113]]},"deserializer":"MarkerPatch"},{"oldRange":[[37,112],[37,113]],"newRange":[[37,112],[37,112]],"oldText":"}","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[37,112],[37,112]]},"newParams":{"range":[[37,111],[37,112]]},"deserializer":"MarkerPatch"},{"oldRange":[[37,111],[37,112]],"newRange":[[37,111],[37,111]],"oldText":" ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[37,107],[37,107]]},"newParams":{"range":[[37,106],[37,107]]},"deserializer":"MarkerPatch"},{"oldRange":[[37,106],[37,107]],"newRange":[[37,106],[37,106]],"oldText":"2","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[37,106],[37,106]],"newRange":[[37,106],[37,107]],"oldText":"","newText":"3","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[34,0],[34,8]],"newRange":[[34,0],[34,0]],"oldText":"        ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"reversed":false,"range":[[4,2],[4,2]]},"newParams":{"reversed":true,"range":[[4,1],[4,2]]},"deserializer":"MarkerPatch"},{"oldRange":[[4,1],[4,2]],"newRange":[[4,1],[4,1]],"oldText":" ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[4,1],[4,1]]},"newParams":{"range":[[4,0],[4,1]]},"deserializer":"MarkerPatch"},{"oldRange":[[4,0],[4,1]],"newRange":[[4,0],[4,0]],"oldText":"","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[4,0],[4,0]]},"newParams":{"range":[[3,24],[4,0]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,24],[4,0]],"newRange":[[3,24],[3,24]],"oldText":"\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,24],[3,24]],"newRange":[[3,24],[4,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[4,0],[4,0]],"newRange":[[4,0],[4,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[54,0],[54,0]],"newRange":[[54,0],[58,0]],"oldText":"","newText":"context \"duration of non-integer steps\" do\n  specify { expect{|b| interval.step(1000, &b) }\n      .to yield_successive_args now-duration, now-(duration-1000), now-(duration-2000), now-(duration-3000) }\nend\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[54,0],[54,0]],"newRange":[[54,0],[54,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[55,0],[55,0]],"newRange":[[55,0],[55,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[56,0],[56,0]],"newRange":[[56,0],[56,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[54,0],[57,0]],"newRange":[[54,0],[54,0]],"oldText":"  context \"duration of non-integer steps\" do\n    specify { expect{|b| interval.step(1000, &b) }\n        .to yield_successive_args now-duration, now-(duration-1000), now-(duration-2000), now-(duration-3000) }\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[53,0],[53,0]]},"newParams":{"range":[[53,0],[54,0]]},"deserializer":"MarkerPatch"},{"oldRange":[[53,0],[54,0]],"newRange":[[53,0],[53,0]],"oldText":"\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[53,0],[53,0]]},"newParams":{"range":[[53,0],[53,3]]},"deserializer":"MarkerPatch"},{"oldRange":[[53,0],[53,3]],"newRange":[[53,0],[53,0]],"oldText":"end","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"}],"redoStack":[],"deserializer":"History"},"filePath":"/Users/tra/github/timerage/spec/timerage/time_interval_spec.rb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"6e12e430d158d618fc03a9980dbfd8c700d02e54","deserializer":"TextBuffer"},{"text":"require_relative \"spec_helper\"\n\ndescribe Timerage do\n  begin\n    using Timerage\n\n    subject(:range) { Range.new(now-duration, now) }\n\n    specify { expect(range.to_time_interval).to be_kind_of Timerage::TimeInterval }\n    specify { expect{|b| range.step(1200, &b) }.to yield_control.at_least(:once) }\n\n    context \"interval include end\" do\n      specify { expect{|b| range.step(1200, &b) }\n          .to yield_successive_args now-duration, now-(duration-1200), now-(duration-2400), now }\n\n  end\n\n    context \"interval exclude end\" do\n      subject (:range) { Range.new(now-duration, now, true) }\n\n      specify { expect{|b| range.step(1200, &b) }\n          .to yield_successive_args now-duration, now-(duration-1200), now-(duration-2400) }\n    end\n\n    let(:now) { Time.now }\n    let(:duration) { 3600 }\n  end\nend\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":23},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/tra/github/timerage/spec/timerage_spec.rb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"d62c67596f8e8aef990bc7cfc39216f892da78b0","deserializer":"TextBuffer"},{"text":"require \"timerage/version\"\n\nmodule Timerage\n  autoload :TimeInterval, \"timerage/time_interval\"\n\n  refine Range do\n    def step(n, &blk)\n      if self.begin.kind_of?(Time) || self.begin.kind_of?(Date)\n        Timerage::TimeInterval.new(self).step(n, &blk)\n      else\n        super\n      end\n    end\n\n    def to_time_interval\n      Timerage::TimeInterval.new(self)\n    end\n  end\nend\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":29},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/tra/github/timerage/lib/timerage.rb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"da9163717840d6f067d5f0fa337d009e2ca4ebf8","deserializer":"TextBuffer"},{"text":"require \"delegate\"\n\nmodule Timerage\n  # A range of time. The exposes the Range like interface.\n  class TimeInterval < DelegateClass(Range)\n    def initialize(*args)\n      rng = if rangeish?(args.first)\n              args.first\n            else\n              Range.new(*args)\n            end\n\n      super rng\n    end\n\n    alias_method :to_time, :begin\n\n    def step(n, &blk)\n      if block_given?\n        time_enumerator(n).each(&blk)\n      else\n        time_enumerator(n)\n      end\n    end\n\n    protected\n\n    def rangeish?(an_obj)\n      an_obj.respond_to?(:begin) &&\n        an_obj.respond_to?(:end)\n    end\n\n    # ---\n    #\n    # This is implemented in a slightly more procedural style than i\n    # prefer because we want to work well with ActiveSupport::Duration\n    # steps. Adding a Duration to a time uses the timezone (dst, etc),\n    # leap second and leap day aware `#advance` method in\n    # ActiveSupport. However, multiplying a Duration by a number\n    # returns a number, rather than a duration. This, in turn, means\n    # that adding a duration times a number to a time results in\n    # Timely incorrect results. So we do it the hard way.\n    def time_enumerator(step)\n      count = (self.end - self.begin).div(step) + 1\n      count -= 1 if exclude_end? and (self.end - self.begin) % step == 0\n      # We've included our end if it should be\n\n      Enumerator.new do |y|\n        y << last = self.begin\n\n        (count-1).times do\n          y << last = last + step\n        end\n      end\n    end\n  end\nend\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":39},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/tra/github/timerage/lib/timerage/time_interval.rb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"7c8459551044a10686ac01e0b813b7a5542250be","deserializer":"TextBuffer"},{"text":"# coding: utf-8\nlib = File.expand_path('../lib', __FILE__)\n$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)\nrequire 'timerage/version'\n\nGem::Specification.new do |spec|\n  spec.name          = \"timerage\"\n  spec.version       = Timerage::VERSION\n  spec.authors       = [\"Peter Williams\", \"Chris Schneider\"]\n  spec.email         = [\"cschneider@comverge.com\"]\n  spec.summary       = %q{Simple refinement to Range to allow Time or Date as arguments}\n  spec.description   = %q{Simple refinement to Range to allow Time or Date as arguments}\n  spec.homepage      = \"\"\n  spec.license       = \"MIT\"\n\n  spec.files         = `git ls-files -z`.split(\"\\x0\")\n  spec.executables   = spec.files.grep(%r{^bin/}) { |f| File.basename(f) }\n  spec.test_files    = spec.files.grep(%r{^(test|spec|features)/})\n  spec.require_paths = [\"lib\"]\n\n  spec.add_development_dependency \"bundler\", \"~> 1.5\"\n  spec.add_development_dependency \"rake\"\n  spec.add_development_dependency \"rspec\", [\"> 3.0.0.a\", \"< 4\"]\nend\n","markers":{"markers":{"1":{"id":1,"range":[[7,23],[7,31]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":43,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/tra/github/timerage/timerage.gemspec","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"16e8f87379f8bf5754bda4ed04bfaddd08d90657","deserializer":"TextBuffer"},{"text":"module Timerage\n  VERSION = \"1.1.2\"\nend\n","markers":{"markers":{"1":{"id":1,"range":[[1,18],[1,18]],"tailed":false,"reversed":true,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":47,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[{"patches":[{"id":1,"oldParams":{"reversed":false,"range":[[1,18],[1,18]]},"newParams":{"reversed":true,"range":[[1,17],[1,18]]},"deserializer":"MarkerPatch"},{"oldRange":[[1,17],[1,18]],"newRange":[[1,17],[1,17]],"oldText":"1","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,17],[1,17]],"newRange":[[1,17],[1,18]],"oldText":"","newText":"2","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"}],"redoStack":[],"deserializer":"History"},"filePath":"/Users/tra/github/timerage/lib/timerage/version.rb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"d6d06a797ed522a70f339a4dad5693abde762aa7","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"items":[{"id":19,"softTabs":true,"displayBuffer":{"id":20,"softWrap":false,"editorWidthInChars":129,"scrollTop":317,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/tra/github/timerage/spec/timerage/time_interval_spec.rb","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":23,"softTabs":true,"displayBuffer":{"id":24,"softWrap":false,"editorWidthInChars":129,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/tra/github/timerage/spec/timerage_spec.rb","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":29,"softTabs":true,"displayBuffer":{"id":30,"softWrap":false,"editorWidthInChars":129,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/tra/github/timerage/lib/timerage.rb","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":39,"softTabs":true,"displayBuffer":{"id":40,"softWrap":false,"editorWidthInChars":129,"scrollTop":187,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/tra/github/timerage/lib/timerage/time_interval.rb","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":43,"softTabs":true,"displayBuffer":{"id":44,"softWrap":false,"editorWidthInChars":129,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/tra/github/timerage/timerage.gemspec","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":47,"softTabs":true,"displayBuffer":{"id":48,"softWrap":false,"editorWidthInChars":129,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/tra/github/timerage/lib/timerage/version.rb","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"}],"activeItemUri":"atom://find-and-replace/project-results","focused":true,"active":true,"deserializer":"Pane"},"deserializer":"PaneContainer"},"fullScreen":false,"deserializer":"Workspace"},"packageStates":{"find-and-replace":{"projectViewState":{"findHistory":["VERSION"],"replaceHistory":[],"pathsHistory":[],"modelState":{"useRegex":false,"caseSensitive":false}},"resultsModelState":{"useRegex":false,"caseSensitive":false}},"fuzzy-finder":{"/Users/tra/github/timerage/spec/timerage/time_interval_spec.rb":1401739615884,"/Users/tra/github/timerage/spec/timerage_spec.rb":1401740439837,"/Users/tra/github/timerage/lib/timerage.rb":1401741308702,"/Users/tra/github/timerage/lib/timerage/time_interval.rb":1401741311706,"/Users/tra/github/timerage/timerage.gemspec":1401741600804,"/Users/tra/github/timerage/lib/timerage/version.rb":1401741613326},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":2151979},"tree-view":{"directoryExpansionStates":{"lib":{"timerage":{}},"spec":{"timerage":{}}},"hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}